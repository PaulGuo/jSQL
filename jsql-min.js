(function(){var h=Array.prototype.push,n=Array.prototype.slice,q=Array.prototype.unshift,p=Object.prototype.toString,l=Object.prototype.hasOwnProperty;var k=Array.prototype.forEach,g=Array.prototype.map,s=Array.prototype.reduce,c=Array.prototype.reduceRight,j=Array.prototype.filter,a=Array.prototype.every,r=Array.prototype.some,o=Array.prototype.indexOf,d=Array.prototype.lastIndexOf,b=Array.isArray,t=Object.keys,i=Function.prototype.bind;var e,m,f={};if(typeof(this.jSQL)!=="undefined"){e=this.jSQL;}m=function(){this.init.apply(this,arguments);};m.prototype={init:function(){this._jSQL=e;this._DB=f;this._currentDB=null;this._buffer=null;},create:function(w,v){var u;if(this._DB.hasOwnProperty(w)){throw ("DB Already Exist.");}if(this._isArray(v)){u=this._listSlice(arguments,"2:");this._appendKey(v,u);}if(this._isObject(v)){v=this._objectToArray(v);}this._DB[w]=v;return this;},use:function(u){if(!this._DB.hasOwnProperty(u)){throw ("Database Not Exist.");}this._currentDB=this._DB[u];return this;},drop:function(u){if(this._DB.hasOwnProperty(u)){delete this._DB[u];}},dbs:function(){return this._keys(this._DB);},select:function(u){if(!this._currentDB){throw ("Please Select Database First.");}this._buffer=this._currentDB;if(u==="*"){return this;}this.where(function(v){return typeof(this._deep(v,u))!=="undefined";});return this;},count:function(){return this._buffer.length;},total:function(x){var u=0,w;for(var v in this._currentDB){if(this._currentDB.hasOwnProperty(v)){w=x==="*"?this._currentDB[v]:typeof(x)==="function"?x.call(this,this._currentDB[v],v)===true?true:undefined:this._deep(this._currentDB[v],x);if(typeof(w)!=="undefined"){u++;}}}return u;},orderby:function(w,y,u){var v=this._buffer;var x=this;if(typeof(y)!=="function"){y=[u,u=y][0];}v.sort(function(A,z){A=x._deep(A,w);z=x._deep(z,w);if(y){A=y(A);z=y(z);}return u&&u.toLowerCase()==="asc"?A-z:z-A;});this._buffer=v;return this;},where:function(w){var v=[],x;this._buffer=this._buffer||this._currentDB;for(var u in this._buffer){if(this._buffer.hasOwnProperty(u)){if(typeof(w)==="function"){x=w.call(this,this._buffer[u],u);}if(this._isArray(w)){x=false;for(var y in w){if(w.hasOwnProperty(y)){if(w[y].call(this,this._buffer[u],u)){x=true;}}}}if(x){v[u]=this._buffer[u];}}}this._buffer=v;return this;},iterate:function(v){var w;this._buffer=this._buffer||this._currentDB;for(var u in this._buffer){if(this._buffer.hasOwnProperty(u)){w=v.call(this,this._buffer[u]);if(w){this.update(u,w);}}}return this;},findAll:function(){return this._clone(this._arrayToObject(this._buffer));},find:function(v){if(!v){for(var u in this._buffer){if(v){break;}if(this._buffer.hasOwnProperty(u)){v=u;}}}return this._clone(this._buffer[v]);},listAll:function(){return this._clone(this._buffer);},update:function(u,v){if(!this._currentDB){throw ("Please Select Database First.");}if(this._currentDB.hasOwnProperty(u)){this._currentDB[u]=v;}},limit:function(x,v){var w=this._buffer;var u;if(!v){x=[0,v=x][0];}u=x+":"+(x+v);this._buffer=this._listSlice(w,u);return this;},keys:function(){return this._keys(this.findAll());},_deep:function(x,w){var v=x,w=w.split(".");for(var u=0;u<w.length;u++){v=v[w[u]];}return v;},_isArray:b||function(u){return p.call(u)==="[object Array]";},_isObject:function(u){return u===Object(u);},_clone:function(w){var v={};if(!this._isObject(w)){return w;}if(this._isArray(w)){return w.slice();}for(var u in w){if(w.hasOwnProperty(u)){v[u]=w[u];}}return v;},_objectToArray:function(u){var w=[],u=this._clone(u);for(var v in u){if(u.hasOwnProperty(v)){u[v].jSQL_Key=v;w.push(u[v]);}}return w;},_arrayToObject:function(x,w){var u={};for(var v=0;v<x.length;v++){u[x[v][w||"jSQL_Key"]]=x[v];delete u[x[v][w||"jSQL_Key"]][w||"jSQL_Key"];}return u;},_each:function(w,v){if(k){w.forEach(v);return;}for(var u=0;u<w.length;u++){v(w[u],u,w);}},_keygen:function(v,u){var x=this;var y=[].slice.call(arguments,1);var w="";if(x._isArray(u)){y=u;}x._each(y,function(B,z,A){w+=v[B];});return w;},_listSlice:function(w,v){var x,u;w=[].slice.call(w);v=v.split(":");x=v[0]||0;u=v.length>1?v[1]||w.length:w.length;return[].slice.call(w,x,u);},_appendKey:function(w,u){var v=this;v._each(w,function(z,x,y){z.jSQL_Key=v._keygen(z,u);});},_keys:t||(function(){var y=true,v=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=v.length;for(var w in {toString:null}){y=false;}return function x(B){if((typeof B!="object"&&typeof B!="function")||B===null){throw new TypeError("Object.keys called on a non-object");}var E=[];for(var A in B){if(B.hasOwnProperty(A)){E.push(A);}}if(y){for(var C=0,D=u;C<D;C++){var z=v[C];if(B.hasOwnProperty(z)){E.push(z);}}}return E;};})()};m=new m();typeof(module)!=="undefined"&&module.exports?module.exports=m:this.jSQL=m;})();